{% extends 'backend/dashboard/main.html' %}
{% load form_tags %}
{% load static %}
{% block content %}

    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <form action="{% url 'iptv_edit' data.id %}" method="post" id="user_form">
                    {% csrf_token %}
                    <div class="card">
                        <div class="card-header">
                            <h3 class="font-weight-bold">Add New IPTV</h3>
                        </div>
                        <div class="card-body">
                                <div class="row">
                                     <div class="form-group col-md-12">
                                        <div class="form-label text-uppercase">Name<span class="text-danger">*</span></div>
                                        {% input type='text' name='name' value=data.name class='form-control required' placeholder="" %}
                                    </div>
                                    <div class="form-group col-md-12">
                                        <div class="form-label text-uppercase">Url <span class="text-danger">*</span></div>
                                        {% input type='text' name='url' value=data.url class='form-control required' placeholder="" %}
                                    </div>

                                     <div class=" form-group mb-2 col-md-12">
                                        <div class="form-label text-uppercase">Image</div>
                                         <div class="row">
                                                <div class="col-sm-9">
                                                    <input type="file" class="form-control input-sm"
                                                           name="image"
                                                           id="user_signature"
                                                           onchange="imageUploadWithCropping(this, 'signature_preview', 'signature_base64')"
                                                           size="400x225"/>
                                                    <span class="text-success"
                                                          style="font-size: 9px; font-weight: bold; display: block;">[File
                                                        Format:
                                                        *.jpg/ .jpeg/ .png | Width 300PX, Height 80PX]</span>
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="center-block image-upload" for="user_signature">
                                                        <figure>
                                                            <img src="/media/{{ data.image }}"  data-src="/media/{{ data.image }}"
                                                                 class="img-responsive img-thumbnail"
                                                                 id="signature_preview"
                                                                 onerror="this.onerror=null;this.src='{% static 'images/no_image.png' %}';">

                                                            <figcaption><i class="fa fa-camera"></i></figcaption>
                                                        </figure>
                                                        <input type="hidden" id="signature_base64"
                                                               name="image_base64"/>
                                                    </label>
                                                </div>
                                            </div>
                                    </div>

                                    <div class="form-group col-md-12 mb-0">
                                        <button class="btn btn-sm btn-primary" type="submit">Save</button>
                                    </div>


                                </div>

                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
        {% include 'backend/partials/image-upload.html' %}
{% endblock %}
{% block extra_js %}
        <script type="text/javascript" src="{% static 'assets/plugins/jquery-validation/jquery.validate.js' %}"></script>
            {% include 'backend/partials/image-upload-script.html' %}


    <script>
     $(document).ready(function () {
         $("#user_form").validate({
             rules: {
                },
              messages: {
                name: "Provide Router Name.",
                ip_address: "Provide Router IP address.",
                user_name: "Provide Router username.",
                password: "Provide Router password.",
                api_port: "Provide Router Api Port.",
            },
             errorPlacement: function(error, element) {
                error.insertAfter(element); // Display the error message after the invalid input element
            },
         });
     });
    </script>


{% endblock %}